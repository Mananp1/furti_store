import{j as e,L as d,r as x}from"./router-Cw9W2VPt.js";import{s as h,y as l,i as g,j as f,E as j,k as p}from"./index-C-cGNFZt.js";import{C as y,a as b,d as N,g as L,I as k,B as v}from"./shadcn-D0D_yQn8.js";import{a as F,F as C,b as w,c as A,d as E,e as I,f as S}from"./zod-D_yRXS8p.js";import{u as U,o as M,s as R}from"./forms-CL1apIa9.js";const H=({title:s,children:a})=>e.jsxs(y,{className:"w-full max-w-md",children:[e.jsx(b,{className:"text-center",children:e.jsx(N,{className:"text-2xl font-bold",children:s})}),e.jsx(L,{className:"space-y-4",children:a})]}),B=()=>({handleLogout:async()=>{try{await h(),l.success("Logged out successfully!")}catch{l.error("Failed to log out")}}}),W=({children:s,imageSrc:a,imageAlt:r})=>e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsxs("div",{className:"w-full h-full grid lg:grid-cols-2 p-4",children:[e.jsx("div",{className:"max-w-xs m-auto w-full flex flex-col items-center",children:s}),e.jsx("div",{className:"bg-muted hidden lg:block rounded-lg overflow-hidden mr-6 my-2",children:e.jsx("img",{src:a,alt:r,className:"w-full h-full object-cover"})})]})}),Y=({title:s})=>e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsx("p",{className:"mt-6 text-xl font-bold tracking-tight",children:s})]}),O=M({email:R().email("Please enter a valid email address")}),_=({onSubmit:s,submitButtonText:a,isLoading:r=!1})=>{const o=U({defaultValues:{email:""},resolver:F(O),mode:"onChange"});return e.jsx("div",{className:"w-full mt-8",children:e.jsx(C,{...o,children:e.jsxs("form",{className:"w-full space-y-6",onSubmit:o.handleSubmit(s),children:[e.jsx(w,{control:o.control,name:"email",render:({field:n})=>e.jsxs(A,{children:[e.jsx(E,{children:"Email"}),e.jsx(I,{children:e.jsx(k,{type:"email",placeholder:"Enter your email address",className:"w-full",disabled:r,...n})}),e.jsx(S,{})]})}),e.jsx(v,{type:"submit",className:"w-full",disabled:r,children:a})]})})})},q=({type:s})=>s==="login"?e.jsx("div",{className:"mt-8 space-y-4",children:e.jsxs("p",{className:"text-sm text-center",children:["Don't have an account?",e.jsx(d,{to:"/signup",className:"ml-1 underline text-muted-foreground",children:"Create account"})]})}):e.jsx("div",{className:"mt-8 space-y-4",children:e.jsxs("p",{className:"text-sm text-center",children:["Already have an account?",e.jsx(d,{to:"/login",className:"ml-1 underline text-muted-foreground",children:"Sign in"})]})}),z=s=>{const[a,r]=x.useState(!1);return{handleFormSubmit:async n=>{r(!0);const{email:m}=n;try{const t="https://furnishly.online",i=`${t}/`,u=`${t}/login`,c=await f.magicLink({email:m,callbackURL:i,newUserCallbackURL:i,errorCallbackURL:u});c.error?(console.error("❌ Magic link error:",c.error),l.error(c.error.message||"Failed to send magic link")):l.success("Magic link sent! Check your email (or console for development).")}catch(t){console.error("❌ Magic link exception:",t),console.error("❌ Error details:",{message:t.message,stack:t.stack,name:t.name}),l.error("Failed to send magic link")}finally{r(!1)}},isLoading:a}};function G(){const{handleLogout:s}=B(),a=[{label:"Continue to Home",href:"/",variant:"default"},{label:"Log Out",onClick:s,variant:"outline"}];return e.jsx(j,{variant:"card",children:e.jsxs(H,{title:"Already Logged In",children:[e.jsx("p",{className:"text-center text-gray-600",children:"You are already logged in. Would you like to log out or continue to the home page?"}),e.jsx(p,{actions:a})]})})}export{W as A,Y as a,_ as b,q as c,G as d,z as u};
