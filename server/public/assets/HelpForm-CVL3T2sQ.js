import{j as e,r as N}from"./router-Cw9W2VPt.js";import{c as b,I as x,B as g}from"./shadcn-D0D_yQn8.js";import{a as F,F as v,b as i,c as m,d as o,e as n,f as d}from"./zod-QoQSAIte.js";import{u as y,o as w,s as c}from"./forms-CL1apIa9.js";import{u as S}from"./index-Cw5l8FsF.js";function E({className:t,...u}){return e.jsx("textarea",{"data-slot":"textarea",className:b("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...u})}const L=w({email:c().email("Please enter a valid email address"),firstName:c().min(1,"First name is required"),lastName:c().min(1,"Last name is required"),message:c().min(5,"Tell us more...")}),q=({onSubmit:t,submitButtonText:u="Submit"})=>{const{data:a,isPending:l}=S(),r=y({defaultValues:{email:"",firstName:"",lastName:"",message:""},resolver:F(L)});N.useEffect(()=>{if(a?.user&&!l){const s=a.user.email||"",f=(a.user.name||"").split(" "),j=f[0]||"",p=f.slice(1).join(" ")||"";r.setValue("email",s),j&&r.setValue("firstName",j),p&&r.setValue("lastName",p)}},[a,l,r]);const h=s=>{t?t(s):console.log("Form submitted:",s)};return e.jsx(v,{...r,children:e.jsxs("form",{className:"w-full space-y-4",onSubmit:r.handleSubmit(h),children:[l&&e.jsx("div",{className:"p-3 bg-muted/50 border border-muted rounded-lg mb-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your account information..."})}),a?.user&&!l&&e.jsx("div",{className:"p-3 bg-primary/5 border border-primary/20 rounded-lg mb-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:e.jsxs("span",{className:"font-medium",children:["Signed in as ",a.user.email]})})}),e.jsx(i,{control:r.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(o,{children:"Email"}),e.jsx(n,{children:e.jsx(x,{type:"email",placeholder:"Your email",className:"w-full",readOnly:!!a?.user?.email,...s})}),e.jsx(d,{className:"text-sm text-red-600 mt-1"})]})}),e.jsx(i,{control:r.control,name:"firstName",render:({field:s})=>e.jsxs(m,{children:[e.jsx(o,{children:"First Name"}),e.jsx(n,{children:e.jsx(x,{type:"text",placeholder:"Your first name",className:"w-full",...s})}),e.jsx(d,{className:"text-sm text-red-600 mt-1"})]})}),e.jsx(i,{control:r.control,name:"lastName",render:({field:s})=>e.jsxs(m,{children:[e.jsx(o,{children:"Last Name"}),e.jsx(n,{children:e.jsx(x,{type:"text",placeholder:"Your last name",className:"w-full",...s})}),e.jsx(d,{className:"text-sm text-red-600 mt-1"})]})}),e.jsx(i,{control:r.control,name:"message",render:({field:s})=>e.jsxs(m,{className:"col-span-12 flex flex-col items-start gap-2",children:[e.jsx(o,{children:"Message"}),e.jsx(n,{children:e.jsx(E,{placeholder:"Tell us more...",...s,className:"w-full"})}),e.jsx(d,{className:"text-sm text-red-600 mt-1"})]})}),e.jsx(g,{type:"submit",className:"mt-4 w-full",children:u})]})})};export{q as H};
