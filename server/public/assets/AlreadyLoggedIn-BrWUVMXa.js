import{j as e,L as m,r as g}from"./router-Cw9W2VPt.js";import{s as x,y as o,i as h,j as f,E as j,k as p}from"./index-Cw5l8FsF.js";import{C as y,a as k,d as b,g as L,I as N,B as F}from"./shadcn-D0D_yQn8.js";import{a as v,F as w,b as C,c as A,d as E,e as I,f as S}from"./zod-QoQSAIte.js";import{u as M,o as U,s as R}from"./forms-CL1apIa9.js";const H=({title:s,children:a})=>e.jsxs(y,{className:"w-full max-w-md",children:[e.jsx(k,{className:"text-center",children:e.jsx(b,{className:"text-2xl font-bold",children:s})}),e.jsx(L,{className:"space-y-4",children:a})]}),B=()=>({handleLogout:async()=>{try{await x(),o.success("Logged out successfully!")}catch{o.error("Failed to log out")}}}),W=({children:s,imageSrc:a,imageAlt:r})=>e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsxs("div",{className:"w-full h-full grid lg:grid-cols-2 p-4",children:[e.jsx("div",{className:"max-w-xs m-auto w-full flex flex-col items-center",children:s}),e.jsx("div",{className:"bg-muted hidden lg:block rounded-lg overflow-hidden mr-6 my-2",children:e.jsx("img",{src:a,alt:r,className:"w-full h-full object-cover"})})]})}),Y=({title:s})=>e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx("p",{className:"mt-6 text-xl font-bold tracking-tight",children:s})]}),O=U({email:R().email("Please enter a valid email address")}),q=({onSubmit:s,submitButtonText:a,isLoading:r=!1})=>{const t=M({defaultValues:{email:""},resolver:v(O),mode:"onChange"});return e.jsx("div",{className:"w-full mt-8",children:e.jsx(w,{...t,children:e.jsxs("form",{className:"w-full space-y-6",onSubmit:t.handleSubmit(s),children:[e.jsx(C,{control:t.control,name:"email",render:({field:c})=>e.jsxs(A,{children:[e.jsx(E,{children:"Email"}),e.jsx(I,{children:e.jsx(N,{type:"email",placeholder:"Enter your email address",className:"w-full",disabled:r,...c})}),e.jsx(S,{})]})}),e.jsx(F,{type:"submit",className:"w-full",disabled:r,children:a})]})})})},z=({type:s})=>s==="login"?e.jsx("div",{className:"mt-8 space-y-4",children:e.jsxs("p",{className:"text-sm text-center",children:["Don't have an account?",e.jsx(m,{to:"/signup",className:"ml-1 underline text-muted-foreground",children:"Create account"})]})}):e.jsx("div",{className:"mt-8 space-y-4",children:e.jsxs("p",{className:"text-sm text-center",children:["Already have an account?",e.jsx(m,{to:"/login",className:"ml-1 underline text-muted-foreground",children:"Sign in"})]})}),G=s=>{const[a,r]=g.useState(!1);return{handleFormSubmit:async c=>{r(!0);const{email:i}=c;console.log("ğŸš€ Starting magic link process for:",i),console.log("ğŸ“§ Auth type:",s),console.log("ğŸŒ Frontend URL:",window.location.origin);try{console.log("ğŸ”— Calling signIn.magicLink...");const l="https://furnishly.online",d=`${l}/`,u=`${l}/login`,n=await f.magicLink({email:i,callbackURL:d,newUserCallbackURL:d,errorCallbackURL:u});console.log("ğŸ“§ Magic link result:",n),n.error?(console.error("âŒ Magic link error:",n.error),o.error(n.error.message||"Failed to send magic link")):(console.log("âœ… Magic link sent successfully"),o.success("Magic link sent! Check your email (or console for development)."))}catch(l){console.error("âŒ Magic link exception:",l),console.error("âŒ Error details:",{message:l.message,stack:l.stack,name:l.name}),o.error("Failed to send magic link")}finally{r(!1),console.log("ğŸ Magic link process completed")}},isLoading:a}};function J(){const{handleLogout:s}=B(),a=[{label:"Continue to Home",href:"/",variant:"default"},{label:"Log Out",onClick:s,variant:"outline"}];return e.jsx(j,{variant:"card",children:e.jsxs(H,{title:"Already Logged In",children:[e.jsx("p",{className:"text-center text-gray-600",children:"You are already logged in. Would you like to log out or continue to the home page?"}),e.jsx(p,{actions:a})]})})}export{W as A,Y as a,q as b,z as c,J as d,G as u};
