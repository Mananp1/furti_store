import{j as e,r as j,h as b,O as y}from"./router-Cw9W2VPt.js";import{P as k}from"./ProductCardBase-DswX1Of-.js";import{u as F}from"./useWishlist-BBalLzcA.js";import{S as P,a as C,b as S,c as L,R as N,d as m,L as x}from"./index-C-cGNFZt.js";import{B as W}from"./shadcn-D0D_yQn8.js";import{A,a as p,b as g,c as f}from"./accordion-DPstC-wD.js";import{F as w}from"./icons-lkuTPY-4.js";import{a as B}from"./query-UWIsBdtC.js";import{a as R}from"./cart-BewrXa47.js";import{p as T}from"./products-P04FZvIx.js";import"./wishlist-BALm09WR.js";import"./vendor-DJG_os-6.js";import"./redux-BWM5Hhun.js";import"./utils-CjxovF-h.js";import"./user-ByFsq5Pz.js";import"./ui-BRLOXzHy.js";import"./forms-CL1apIa9.js";const H=({sidebar:t,main:r})=>e.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen",children:[e.jsx("aside",{className:"w-full md:w-64 border-b md:border-b-0 md:border-r bg-white",children:t}),e.jsx("main",{className:"flex-1 p-4",children:r})]});function E({product:t}){const{addToWishlist:r,removeFromWishlist:l,isInWishlist:i}=F(),o=i(t._id),c=async()=>{o?await l(t._id):await r(t)};return e.jsx(k,{product:t,showWishlistButton:!0,showAddToCartButton:!0,onWishlistClick:c})}const M=({products:t,isLoading:r,isError:l,error:i})=>e.jsxs("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 justify-center mx-auto",children:[r&&e.jsx("div",{className:"col-span-full text-center",children:"Loading products..."}),l&&e.jsxs("div",{className:"col-span-full text-center text-red-500",children:["Error: ",i?.message||"Failed to load products."]}),!r&&!l&&t.length===0&&e.jsx("div",{className:"col-span-full text-center text-muted-foreground",children:"No products found."}),t.map(o=>e.jsx("div",{className:"flex justify-center",children:e.jsx(E,{product:o})},o._id))]});function O({filters:t,setFilters:r,sort:l,onSortChange:i}){const o=["Office","Living Room","Bedroom","Dining Room"],c=["Wood","Leather","Fabric","Wood and Metal"],n=(s,d)=>{r(u=>{const a=new Set(u[s]);return a.has(d)?a.delete(d):a.add(d),{...u,[s]:Array.from(a)}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden p-4 flex items-center",children:e.jsxs(P,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(W,{variant:"outline",className:"md:w-50","aria-label":"Open filters",children:["Filter ",e.jsx(w,{className:"w-5 h-5"})]})}),e.jsxs(S,{side:"left",className:"max-w-xs p-4",children:[e.jsx(L,{children:e.jsxs("span",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"})," Filters"]})}),e.jsxs("div",{className:"flex flex-col gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-2",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(s=>e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.category.includes(s),onChange:()=>n("category",s),className:"accent-black"}),s]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-2",children:"Material"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(s=>e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.material.includes(s),onChange:()=>n("material",s),className:"accent-black"}),s]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"px-2 text-xs font-medium tracking-wide text-muted-foreground uppercase mb-2",children:"Sort by"}),e.jsxs(N,{value:l,onValueChange:i,className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{value:"default",id:"sort-default"}),e.jsx(x,{htmlFor:"sort-default",children:"Default"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{value:"title",id:"sort-title"}),e.jsx(x,{htmlFor:"sort-title",children:"Title"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{value:"price-low-high",id:"sort-low-high"}),e.jsx(x,{htmlFor:"sort-low-high",children:"Price: Low to High"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{value:"price-high-low",id:"sort-high-low"}),e.jsx(x,{htmlFor:"sort-high-low",children:"Price: High to Low"})]})]})]})]})]})]})}),e.jsx("div",{className:"hidden md:block p-4",children:e.jsxs(A,{type:"multiple",className:"w-full space-y-1",children:[e.jsxs(p,{value:"category",children:[e.jsx(g,{className:"px-2 text-xs font-medium tracking-wide text-muted-foreground uppercase",children:"Category"}),e.jsx(f,{children:e.jsx("div",{className:"flex flex-col gap-2",children:o.map(s=>e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.category.includes(s),onChange:()=>n("category",s),className:"mr-2 accent-black"}),s]},s))})})]}),e.jsxs(p,{value:"material",children:[e.jsx(g,{className:"px-2 text-xs font-medium tracking-wide text-muted-foreground uppercase",children:"Material"}),e.jsx(f,{children:e.jsx("div",{className:"flex flex-col gap-2",children:c.map(s=>e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.material.includes(s),onChange:()=>n("material",s),className:"mr-2 accent-black"}),s]},s))})})]}),e.jsxs(p,{value:"sort",children:[e.jsx(g,{className:"px-2 text-xs font-medium tracking-wide text-muted-foreground uppercase",children:"Sort by"}),e.jsx(f,{children:e.jsxs(N,{value:l,onValueChange:i,className:"flex flex-col gap-2 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[e.jsx(m,{value:"default",id:"sort-default-desktop"}),e.jsx(x,{htmlFor:"sort-default-desktop",className:"text-sm text-muted-foreground font-normal cursor-pointer",children:"Default"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[e.jsx(m,{value:"title",id:"sort-title-desktop"}),e.jsx(x,{htmlFor:"sort-title-desktop",className:"text-sm text-muted-foreground font-normal cursor-pointer",children:"Title"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[e.jsx(m,{value:"price-low-high",id:"sort-low-high-desktop"}),e.jsx(x,{htmlFor:"sort-low-high-desktop",className:"text-sm text-muted-foreground font-normal cursor-pointer",children:"Price: Low to High"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[e.jsx(m,{value:"price-high-low",id:"sort-high-low-desktop"}),e.jsx(x,{htmlFor:"sort-high-low-desktop",className:"text-sm text-muted-foreground font-normal cursor-pointer",children:"Price: High to Low"})]})]})})]})]})})]})}const D=({filters:t,setFilters:r,sort:l,onSortChange:i})=>e.jsx(O,{filters:t,setFilters:r,sort:l,onSortChange:i}),G=()=>{const[t,r]=j.useState({category:[],material:[]}),[l,i]=j.useState("default"),{data:o=[],isLoading:c,isError:n,error:s}=B({queryKey:["products"],queryFn:async()=>{const a=await R.get("https://furnishly.online/api/products");return T.parse(a.data)}}),d=o.filter(a=>{const h=t.category.length===0||t.category.includes(a.category),v=t.material.length===0||t.material.includes(a.material);return h&&v});return{products:(()=>{switch(l){case"title":return[...d].sort((a,h)=>a.title.localeCompare(h.title));case"price-low-high":return[...d].sort((a,h)=>a.price-h.price);case"price-high-low":return[...d].sort((a,h)=>h.price-a.price);default:return d}})(),isLoading:c,isError:n,error:s,filters:t,setFilters:r,sort:l,setSort:i}};function I(){const{products:t,isLoading:r,isError:l,error:i,filters:o,setFilters:c,sort:n,setSort:s}=G();return e.jsx(H,{sidebar:e.jsx(D,{filters:o,setFilters:c,sort:n,onSortChange:s}),main:e.jsx(M,{products:t,isLoading:r,isError:l,error:i})})}const le=function(){const{id:r}=b({strict:!1});return e.jsx("div",{children:r?e.jsx(y,{}):e.jsx(I,{})})};export{le as component};
