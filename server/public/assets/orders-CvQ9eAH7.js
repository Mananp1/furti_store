import{i as j,j as s}from"./router-Cw9W2VPt.js";import{u,h as f,y as N,B as p}from"./index-C-cGNFZt.js";import{C as o,g as x,a as y,d as g,f as d}from"./shadcn-D0D_yQn8.js";import{N as v}from"./NotAuthorizedPage-CcSqDRpC.js";import{a as b}from"./query-UWIsBdtC.js";import{j as C,k as w}from"./icons-lkuTPY-4.js";import"./vendor-DJG_os-6.js";import"./redux-BWM5Hhun.js";import"./utils-CjxovF-h.js";import"./cart-BewrXa47.js";import"./user-ByFsq5Pz.js";import"./wishlist-BALm09WR.js";import"./ui-BRLOXzHy.js";const A=()=>{const{data:a}=u(),{data:c,isLoading:l,error:m,refetch:i}=b({queryKey:["paymentHistory"],queryFn:()=>f(1,50),enabled:!!a});return{paymentHistory:c,isLoading:l,error:m,refetch:i}};function I(){const{data:a,isPending:c}=u(),{paymentHistory:l,isLoading:m,error:i}=A(),r=j({from:"/orders"});if(r&&typeof r=="object"&&"success"in r&&r.success==="true"&&a&&N.success("Payment successful! Your order has been placed."),c||m)return s.jsx("div",{className:"flex justify-center items-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{children:"Loading orders..."})]})});if(!a)return s.jsx(v,{});if(i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Orders"}),s.jsx(o,{children:s.jsx(x,{className:"p-6",children:s.jsxs("p",{className:"text-destructive",children:["Error loading orders: ",i.message]})})})]})});const h=l?.payments||[];return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Orders"}),h.length===0?s.jsx(o,{children:s.jsx(x,{className:"p-6",children:s.jsx("p",{className:"text-muted-foreground text-center",children:"No orders found. Start shopping to see your order history here!"})})}):s.jsx("div",{className:"space-y-6",children:h.map(e=>s.jsxs(o,{children:[s.jsx(y,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs(g,{className:"text-lg",children:["Order #",e.orderId]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-lg font-semibold",children:d(e.amount,"INR")}),s.jsx(p,{variant:e.status==="completed"?"default":e.status==="pending"?"secondary":e.status==="failed"?"destructive":"outline",className:"mt-2",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]})}),s.jsx(x,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Items"}),s.jsx("div",{className:"space-y-2",children:e.items.map((t,n)=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{children:[t.name," Ã— ",t.quantity]}),s.jsx("span",{children:d(t.price*t.quantity,"INR")})]},n))})]}),e.shippingAddress&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[s.jsx(C,{className:"h-4 w-4"}),"Shipping Address"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:e.shippingAddress.street}),s.jsxs("p",{children:[e.shippingAddress.city,","," ",e.shippingAddress.state," ",e.shippingAddress.zipCode]}),s.jsx("p",{children:e.shippingAddress.country})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[s.jsx(w,{className:"h-4 w-4"}),"Payment Method"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(p,{variant:"outline",children:e.paymentMethod==="stripe"?"Credit Card":"Cash on Delivery"}),e.paymentMethod==="stripe"&&s.jsx("span",{className:"text-sm text-muted-foreground",children:"via Stripe"})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{children:d(e.items.reduce((t,n)=>t+n.price*n.quantity,0),"INR")})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{className:"font-semibold",children:d(e.amount,"INR")})]})]})]})})]},e.orderId))})]})})}const E=I;export{E as component};
