import{j as t,L as y,h as N,r as v}from"./router-Cw9W2VPt.js";import{u as w,g as b,N as C}from"./index-Cw5l8FsF.js";import{B as p,C as P,f as W}from"./shadcn-D0D_yQn8.js";import{A as k,S,H as A}from"./icons-lkuTPY-4.js";import{a as L}from"./query-UWIsBdtC.js";import{u as T}from"./useWishlist-CQYklalM.js";import{o as I,n as h,s as o,g as _}from"./forms-CL1apIa9.js";import"./vendor-DJG_os-6.js";import"./redux-BWM5Hhun.js";import"./utils-CjxovF-h.js";import"./cart-BewrXa47.js";import"./user-ByFsq5Pz.js";import"./wishlist-BALm09WR.js";import"./ui-BRLOXzHy.js";const $=({children:s})=>t.jsx(t.Fragment,{children:s}),Q=({children:s})=>t.jsx("main",{className:"max-w-5xl mx-auto py-8 px-4 grid grid-cols-1 md:grid-cols-2 gap-8",children:s}),E=({backUrl:s="/products",backText:i="Back to Products"})=>t.jsx("div",{className:"max-w-5xl mt-6 mx-auto px-4",children:t.jsx(p,{children:t.jsxs(y,{to:s,className:"flex items-center space-x-2",children:[t.jsx(k,{}),t.jsx("span",{children:i})]})})}),F=({images:s,title:i})=>t.jsxs("section",{className:"flex flex-col gap-4",children:[t.jsx(P,{className:"overflow-hidden p-0",children:t.jsx("img",{src:s[0],alt:i,className:"w-full h-[22rem] object-cover"})}),s.length>1&&t.jsx("div",{className:"flex gap-2 mt-2",children:s.map((a,r)=>t.jsx("img",{src:a,alt:`${i} - Thumbnail ${r+1}`,className:"w-16 h-16 object-cover rounded border"},r))})]}),q=({title:s,price:i,currency:a="INR",status:r,description:n,category:c,material:l,dimensions:d})=>t.jsxs("section",{className:"flex flex-col gap-4",children:[t.jsx("h1",{className:"text-3xl font-bold",children:s}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xl font-semibold",children:W(i,a)}),r&&t.jsx("span",{className:`text-xs px-2 py-1 rounded ${r==="In Stock"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r})]}),t.jsx("p",{className:"text-muted-foreground",children:n||"No description available."}),t.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[c&&t.jsxs("p",{children:[t.jsx("strong",{children:"Category:"})," ",c]}),l&&t.jsxs("p",{children:[t.jsx("strong",{children:"Material:"})," ",l]}),d&&t.jsxs("p",{children:[t.jsx("strong",{children:"Dimensions:"})," ",d]})]})]}),z=({quantity:s,onQuantityChange:i,options:a=[1,2,3,4,5,10]})=>t.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[t.jsx("label",{htmlFor:"quantity",className:"text-sm font-medium",children:"Quantity:"}),t.jsx("select",{id:"quantity",value:s,onChange:r=>i(Number(r.target.value)),className:"border rounded px-2 py-1",children:a.map(r=>t.jsx("option",{value:r,children:r},r))})]}),B=({isInStock:s,isWishlisted:i,onAddToCart:a,onToggleWishlist:r,showWishlistButton:n=!0})=>t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsxs(p,{size:"lg",className:"flex items-center gap-2",disabled:!s,variant:s?void 0:"secondary",onClick:a,children:[t.jsx(S,{className:"w-5 h-5"})," Add to Cart"]}),n&&t.jsxs(p,{variant:"outline",size:"lg",className:`flex items-center gap-2 ${i?"border-red-500 bg-red-50":""}`,onClick:r,children:[t.jsx(A,{className:`w-5 h-5 ${i?"text-red-500 fill-current":""}`}),i?"Remove from Wishlist":"Add to Wishlist"]})]}),R=({message:s="Loading..."})=>t.jsx("div",{className:"flex justify-center items-center h-96",children:s}),U=I({_id:o(),title:o(),description:o().optional(),price:h(),currency:o().optional(),images:_(o()),category:o().optional(),material:o().optional(),dimensions:o().optional(),status:o().optional(),rating:h().optional()}),H=()=>{const{id:s}=N({strict:!1}),[i,a]=v.useState(1),{data:r}=w(),{addToCart:n}=b(),{addToWishlist:c,removeFromWishlist:l,isInWishlist:d}=T(),{data:e,isLoading:x,isError:j}=L({queryKey:["product",s],queryFn:async()=>{const m=await fetch(`https://furnishly.online/api/products/${s}`);if(!m.ok)throw new Error("Product not found");const u=await m.json();return U.parse(u)},enabled:!!s}),g=e?d(e._id):!1,f=e?.status==="In Stock";return{product:e,isLoading:x,isError:j,quantity:i,setQuantity:a,session:r,isWishlisted:g,isInStock:f,toggleWishlist:async()=>{if(e)if(g)await l(e._id);else{const m={_id:e._id,title:e.title,category:e.category||"Uncategorized",material:e.material||"Unknown",price:e.price,images:e.images,description:e.description};await c(m)}},handleAddToCart:async()=>{if(!e)return;const m={_id:e._id,title:e.title,category:e.category||"Uncategorized",material:e.material||"Unknown",price:e.price,images:e.images,description:e.description};for(let u=0;u<i;u++)await n(m)}}};function D(){const{product:s,isLoading:i,isError:a,quantity:r,setQuantity:n,session:c,isWishlisted:l,isInStock:d,toggleWishlist:e,handleAddToCart:x}=H();return i?t.jsx(R,{}):a||!s?t.jsx(C,{}):t.jsxs($,{children:[t.jsx(E,{}),t.jsxs(Q,{children:[t.jsx(F,{images:s.images,title:s.title}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(q,{title:s.title,price:s.price,currency:"INR",status:s.status,description:s.description,category:s.category,material:s.material,dimensions:s.dimensions}),t.jsx(z,{quantity:r,onQuantityChange:n}),t.jsx(B,{isInStock:d,isWishlisted:l,onAddToCart:x,onToggleWishlist:e,showWishlistButton:!!c})]})]})]})}const nt=D;export{nt as component};
